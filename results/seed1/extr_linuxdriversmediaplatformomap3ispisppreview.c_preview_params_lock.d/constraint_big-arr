value(update) == 255, value(shadow) == 255, length(prev) == 65025