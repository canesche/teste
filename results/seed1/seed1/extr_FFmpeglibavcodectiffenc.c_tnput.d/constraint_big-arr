value(n) == 255, value(flip) == 255, length(p) == 65025, length(val) == 65025