value(buflen) == 10, value(state) == 10, length(buffer) == 100, length(rgd) == 100