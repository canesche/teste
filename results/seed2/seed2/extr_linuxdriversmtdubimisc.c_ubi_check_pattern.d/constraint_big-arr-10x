value(patt) == 10, value(size) == 10, length(buf) == 100