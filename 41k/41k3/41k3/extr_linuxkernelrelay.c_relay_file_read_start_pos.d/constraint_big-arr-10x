value(read_pos) == 10, length(buf) == 100