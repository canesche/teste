value(x) == 10, value(nbits) == 10, length(buf) == 100